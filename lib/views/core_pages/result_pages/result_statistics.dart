import 'package:flutter/material.dart';
import 'package:reckonmalware/constants/constants.dart';
import 'package:syncfusion_flutter_charts/charts.dart';

class Data {
  final String label;
  final int value;
  final color;

  Data(this.label, this.value, this.color);
}

class ResultStatistics extends StatefulWidget {
  ResultStatistics({super.key});

  @override
  State<ResultStatistics> createState() => _ResultStatisticsState();
}

class _ResultStatisticsState extends State<ResultStatistics> {
  List<Data> data = [
    Data('Malicious', maliciousCount, Colors.redAccent),
    Data('Cleaned', cleanedCount, Colors.greenAccent),
    Data('Unknown', unknownCount, Colors.amberAccent),
  ];

  @override
  Widget build(BuildContext context) {
    double screenWidth = MediaQuery.of(context).size.width;

    return Scaffold(
      extendBodyBehindAppBar: true,
      appBar: AppBar(
        title: Text(
          "STATISTICS",
          style: TextStyle(color: Colors.black),
        ),
        backgroundColor: Colors.transparent,
        elevation: 0,
        leading: IconButton(
          color: Colors.amber,
          icon: Icon(
            Icons.arrow_back,
            color: Colors.black,
          ),
          onPressed: () {
            Navigator.pop(context);
          },
        ),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            SfCircularChart(
              legend: Legend(isVisible: true),
              series: <CircularSeries>[
                PieSeries<Data, String>(
                  dataSource: data,
                  xValueMapper: (Data data, _) => data.label,
                  yValueMapper: (Data data, _) => data.value,
                  pointColorMapper: (Data data, _) => data.color,
                ),
              ],
            ),
            Container(
              
              width: screenWidth*0.6,
              height: screenWidth*0.4,
              decoration: BoxDecoration(
                color: Color.fromARGB(255, 245, 211, 91),
                borderRadius: BorderRadius.circular(25),
                boxShadow: [
                  BoxShadow(color: Colors.black38,offset: Offset(15, 10),blurRadius: 12)
                ],
              ),
              child: Row(
                mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                children: [
                  Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    mainAxisAlignment: MainAxisAlignment.center,
                    children: [
                      Text("Total Antivirus:",style: TextStyle(fontWeight: FontWeight.bold),),
                      SizedBox(height: 10),
                      Text("Total Malicious:",style: TextStyle(fontWeight: FontWeight.bold),),
                      SizedBox(height: 10),
                      Text("Total Cleaned:",style: TextStyle(fontWeight: FontWeight.bold),),
                      SizedBox(height: 10),
                      Text("Total Unknown:",style: TextStyle(fontWeight: FontWeight.bold),)
                    ],
                  ),
                  
            Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    mainAxisAlignment: MainAxisAlignment.center,
                    children: [
                      Text("$totalCount"),
                      SizedBox(height: 10),
                      Text("$maliciousCount"),
                      SizedBox(height: 10),
                      Text("$cleanedCount"),
                      SizedBox(height: 10),
                      Text("$unknownCount")
                    ],
                  ),
                ],
              ),
            )
          ],
        ),
      ),
    );
  }
}
