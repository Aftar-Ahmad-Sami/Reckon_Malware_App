import 'package:flutter/material.dart';
import 'package:reckon_malware/Routes/routes.dart';

class LoginPage extends StatefulWidget {
    const LoginPage({Key? key}) : super(key: key);

    @override
    State<LoginPage> createState() => _LoginPageState();
}

class _LoginPageState extends State<LoginPage> {
    /// bool type value declared for suffix icon of password field
    bool _isVisiblePass = false;

    /// FocusNode() of name and password field
    final _nameFocus = FocusNode();
    final _passwordFocus = FocusNode();

    /// all fields controller
    final TextEditingController _userNameController = TextEditingController();
    final TextEditingController _passController = TextEditingController();

    /// _key to validate
    final _key = GlobalKey<FormState>();

    /// navigate to home screen after login
    gotoHome(BuildContext context) {
        if (_key.currentState!.validate()) {
            Navigator.pushNamed(context, Routes.home);
        }
    }

    @override
    Widget build(BuildContext context) {
        return Container(
            decoration: BoxDecoration(
                image: DecorationImage(
                    image: AssetImage('asset/images/signup.png'),
                    fit: BoxFit.cover
                ),
            ),

            child: Scaffold(
                appBar: AppBar(
                    title: Text('SigninPage'),
                ),
                backgroundColor: Colors.white,

                body: Column(
                    children: [
                        Padding(
                            padding: const EdgeInsets.all(40.0),
                            child: Container(
                                alignment: Alignment.center,
                                margin: EdgeInsets.only(left: 0,right:0,top: 100,),
                                // padding: EdgeInsets.only(left: 0,right:420,top: 0,),
                                child: Text('Sign in',
                                    style: TextStyle(
                                        //wordSpacing: 0,
                                        letterSpacing: 2,
                                        color:Colors.black,
                                        fontSize: 48,
                                        fontStyle: FontStyle.italic,
                                        fontWeight: FontWeight.bold,
                                    ),
                                    textAlign: TextAlign.left,
                                ),
                            ),
                        ),

                        SingleChildScrollView(
                            child: Stack(
                                children: [
                                    Padding(
                                        padding: const EdgeInsets.all(50.0),
                                        child: Form(
                                            key: _key,

                                            /// column for text and textformfield
                                            child: Column(
                                                children: [
                                                    ///User Name Field
                                                    TextFormField(
                                                        controller: _userNameController,

                                                        focusNode: _nameFocus,
                                                        onEditingComplete: () =>
                                                            FocusScope.of(context)
                                                                .requestFocus(_passwordFocus),

                                                        keyboardType: TextInputType.text,
                                                        textInputAction: TextInputAction.next,

                                                        decoration: InputDecoration(
                                                            contentPadding: const EdgeInsets.symmetric(
                                                                vertical: 20, horizontal: 20),
                                                            prefixIcon: Icon(Icons.person),
                                                            suffixIcon: IconButton(
                                                                icon: Icon(Icons.clear),
                                                                onPressed: () {
                                                                    _userNameController.clear();
                                                                },
                                                            ),
                                                            enabledBorder: OutlineInputBorder(
                                                                borderRadius: BorderRadius.circular(50),
                                                                borderSide: BorderSide(
                                                                    color: Colors.grey,
                                                                ),
                                                            ),
                                                            focusedBorder: OutlineInputBorder(
                                                                borderRadius: BorderRadius.circular(50),
                                                                borderSide: BorderSide(
                                                                    color: Colors.black,
                                                                ),
                                                            ),
                                                            hintText: 'Enter User Name : ',
                                                            label: Text('UserName'),
                                                        ),

                                                        /// username field
                                                        validator: (value) {
                                                            if (value!.isEmpty) {
                                                                return 'user Name cannot empty';
                                                            }
                                                            return null;
                                                        },
                                                    ),

                                                    SizedBox(height: 20,),

                                                    /// Password Field
                                                    TextFormField(
                                                        controller: _passController,

                                                        focusNode: _passwordFocus,

                                                        obscureText: _isVisiblePass,

                                                        keyboardType: TextInputType.text,
                                                        textInputAction: TextInputAction.done,

                                                        decoration: InputDecoration(
                                                            contentPadding: const EdgeInsets.symmetric(
                                                                vertical: 20, horizontal: 20),
                                                            prefixIcon: Icon(Icons.lock),
                                                            suffixIcon: IconButton(
                                                                onPressed: () {
                                                                    setState(() {
                                                                        _isVisiblePass = !_isVisiblePass;
                                                                    });
                                                                },
                                                                icon: _isVisiblePass
                                                                    ? Icon(
                                                                    Icons.visibility,
                                                                    color: Colors.black,
                                                                )
                                                                    : Icon(
                                                                    Icons.visibility_off,
                                                                    color: Colors.grey,
                                                                ),
                                                            ),
                                                            enabledBorder: OutlineInputBorder(
                                                                borderRadius: BorderRadius.circular(50),
                                                                borderSide: BorderSide(
                                                                    color: Colors.grey,
                                                                ),
                                                            ),
                                                            focusedBorder: OutlineInputBorder(
                                                                borderRadius: BorderRadius.circular(50),
                                                                borderSide: BorderSide(
                                                                    color: Colors.black,
                                                                ),
                                                            ),
                                                            hintText: 'Enter Password : ',
                                                            label: Text('password'),
                                                        ),

                                                        /// password validator
                                                        validator: (value) {
                                                            if (value!.isEmpty) {
                                                                return 'Password can not be empty';
                                                            } else if (value.length < 6) {
                                                                return 'Password must have at least 6 characters';
                                                            }
                                                            return null;
                                                        },
                                                    ),

                                                    SizedBox(height: 20,),

                                                    /// Forgotten Password Field
                                                    Container(
                                                        margin: EdgeInsets.only(left: 25,),
                                                        alignment: Alignment.centerLeft,
                                                        child: Text(
                                                            'Forgott password?',
                                                            textAlign: TextAlign.left,
                                                            style: TextStyle(
                                                                decoration: TextDecoration.underline,
                                                                fontSize: 10,
                                                                fontStyle: FontStyle.italic,
                                                                fontWeight: FontWeight.w900),
                                                        ),
                                                    ),

                                                    SizedBox(height: 30,),

                                                    /// Login Button
                                                    ElevatedButton(
                                                        style: ElevatedButton.styleFrom(
                                                            backgroundColor: Colors.purple,
                                                            fixedSize: Size(150, 50),
                                                            shape: RoundedRectangleBorder(
                                                                borderRadius: BorderRadius.circular(50),
                                                            )),
                                                        //TextButton.styleFrom(minimumSize: Size(150, 50),),
                                                        onPressed: () {
                                                            //Navigator.pushNamed(context, Routes.login);
                                                            //Navigator.pushNamed(context, Routes.home);
                                                            gotoHome(context);
                                                        },
                                                        child: Text(
                                                            'Signin',
                                                            textScaleFactor: 2,
                                                            style: TextStyle(
                                                                fontStyle: FontStyle.italic,
                                                                color: Colors.white,
                                                            ),
                                                        )),

                                                    SizedBox(height: 25,),

                                                    /// "Haven't any account? Sign Up" text form field
                                                    TextButton(
                                                        onPressed: () {
                                                            Navigator.pushNamed(context, 'register');
                                                        },
                                                        child: Text(
                                                            "Haven't any account? Sign Up",
                                                            textAlign: TextAlign.left,
                                                            style: TextStyle(
                                                                // decoration: TextDecoration.underline,
                                                                color: Colors.black,
                                                                fontSize: 15,
                                                                fontStyle: FontStyle.italic,
                                                            ),
                                                        ),
                                                    ),

                                                    Container(
                                                        //margin: EdgeInsets.only(left: 114,top: 755,),
                                                        alignment: Alignment.center,
                                                        child: Text(
                                                            '© Team Wreck-On',
                                                            style: TextStyle(
                                                                color: Colors.grey[400],
                                                                fontSize:15,
                                                            ),
                                                        ),
                                                    ),
                                                ],
                                            ),
                                        ),
                                    ),]),
                        )],
                ),
            ),
        );
    }
}
